<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>GeoPose Sandbox: Test 02 - Basic Visualization</title>
		<link rel="shortcut icon" href="data:image/x-icon;," type="image/x-icon"> 
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<script src="../node_modules/three/build/three.js"></script>
		<script src="../builds/geopose.sandbox.js"></script>
		<style>

.controls {
	position: absolute; top:0; right:0; background:#0008; color:white;
	font-family: Verdana, Geneva, Tahoma, sans-serif; font-size: 2vh;
	padding: 1vh; border: 1px solid blue; z-index: 100;
}
h3 { margin: 1vh 0; }
input { float:right }
		</style>
	</head>
	<body>
		<div class="controls">
			<h3>Camera (GeoPose Basic YPR):</h2>
			<h3>Location:</h2>
			<label for="latitude">Latitude: </label>
			<input id="latitude" name="latitude" type="number" value="0" min="-180" max="180"><br>
			<label for="longitude">Longitude: </label>
			<input id="longitude" name="longitude" type="number" value="0" min="-180" max="180"><br>
			<label for="altitude">Altitude (h): </label>
			<input id="altitude" name="altitude" type="number" value="0"><br>
			<h3>Orientation:</h2>
			<label for="yaw">Yaw: </label>
			<input id="yaw" name="yaw" type="number" value="0"><br>
			<label for="pitch">Pitch: </label>
			<input id="pitch" name="pitch" type="number" value="0"><br>
			<label for="roll">Roll: </label>
			<input id="roll" name="roll" type="number" value="0"><br>
		</div>
		<script> 

// Initialize the sandbox
let sandbox = GeoPoseSandbox.init(); 

// Get the view layer 
let user = sandbox.users.getByIndex(0);
let presence = user.presences.getByIndex(0);
let view = user.views.getByIndex(0);
let layer = view.layers.getByIndex(0);

let p = presence.entity.pose;
let pos = p.position = new EuclideanPosition();
pos.z.value = -16;

console.log(pos.serialize());

// Get the Interaction Space
let space = sandbox.spaces.getByIndex(0);

// Create a widget for the planet component
let backgroundWidget = new BackgroundWidget("Background", space,
	{ radiusX: 50, radiusY: 50, radiusZ: 50, texture: "textures/2k_milky_way.jpg"});

	// Create a widget for the planet component
// let planetWidget = new PlanetWidget("Earth", space,
// 	{ radiusX: 1, radiusY:0.5, radiusZ:1, texture: "textures/2k_earth_daymap.jpg"});

// Create a widget for the GeoPose
let geoposeWidget = new GeoPoseWidget("GeoPoseWidget", layer, { 
	position: { latitude: 0, longitude: 0, altitude: 0},
	orientation: { yaw: 0, pitch: 0, roll: 0 }});

// let lat = document.getElementById("latitude");
// lat.onchange = () =>{
// 	console.log("Lat: " + lat.value);
// 	geoposeWidget.position.latitude.value = lat.value;
// }

// let lng = document.getElementById("longitude");
// lng.onchange = () =>{
// 	console.log("Lng: " + lng.value);
// 	geoposeWidget.position.longitude.value = lng.value;
// }

		</script> 

	</body>
</html>
